import{d as C,u as D,r as v,U as r,V as m,W as u,a5 as a,$ as y,ag as O,j as l,X as P,Y as x,ac as h,ad as A,aa as c,ai as R,aj as I,ah as q}from"./index.b0611a79.js";import{Q as N}from"./QPage.b2a287d8.js";import{APP_LANGUAGES as b}from"./i18n.7878345a.js";import{O as k}from"./organ_donation.ae1bd3a9.js";import{d as w,u as j,x as S}from"./fhir-questionnaire-renderer.8539b579.js";import{u as E}from"./use-quasar.47119d47.js";import{u as U}from"./composables.60f0a31a.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import{u as B}from"./vue-i18n.runtime.16caee72.js";const G={key:0,class:"col-12 col-lg-8"},L={key:1,class:"col-12"},$=C({__name:"OrganDonationPage",setup(F){const i=E(),{t,locale:o}=B(),s=D(),Q=U(),n=v(!1),f=v(-1),e=v();e.value=new w.QuestionnaireData(k,b),e.value.populateAnswers([s.userResource]);function _(){var p,g;e.value&&e.value.isResponseComplete(!0,!0)&&(n.value=!0,j(e.value.getQuestionnaireResponse(o.value,{reset:!1,includeID:!0,patient:{reference:"https://test.ahdis.ch/mag-bfh/fhir/"+s.userResource.resourceType+"/"+s.userResource.id,display:s.userResource.name?q.getFullName(q.selectName(s.userResource.name)):""}}),s.userResource,{title:(p=e.value.getQuestionnaireTitle(o.value))!=null?p:R(),isFhir:!0,description:(g=e.value.getQuestionnaireTitle(o.value))!=null?g:R(),contentLanguage:o.value,sourceIdentifier:s.userSettings.OIDs.app,categoryCoding:{system:"http://snomed.info/sct",code:"184216000",display:"Patient record type"},typeCoding:{system:"http://snomed.info/sct",code:"419891008",display:"Record artifact (record artifact)"},facilityCoding:s.userSettings.facilityType,practiceSettingCoding:s.userSettings.practiceSetting,authorRole:I.PAT},Q).then(()=>{i.notify({message:t("questionnaire.saved"),position:"top-right"}),d(),n.value=!1,f.value*=-1}).catch(T=>{i.notify({message:t("common.error"),type:"negative",position:"top-right"}),console.error(T),n.value=!1}))}function d(){e.value&&(e.value.resetResponse(),e.value.populateAnswers([s.userResource]))}return(p,g)=>(r(),m(N,{class:"full-width row justify-center content-start"},{default:u(()=>[a(i).platform.is.desktop?(r(),y("div",G,[e.value?(r(),m(O,{key:0,class:"q-pb-xs questionnaire-card"},{default:u(()=>[l(h,{class:"card-title"},{default:u(()=>[P(x(e.value.getQuestionnaireTitle(a(o))),1)]),_:1}),l(A),l(h,{class:"q-pa-none"},{default:u(()=>[l(a(S),{"questionnaire-data":e.value,language:a(o),"translation-strings":{save:a(t)("questionnaire.save"),reset:a(t)("questionnaire.reset"),end:a(t)("questionnaire.end"),close:a(t)("common.close")},"disable-save":n.value,onSave:_,onReset:d},null,8,["questionnaire-data","language","translation-strings","disable-save"])]),_:1})]),_:1})):c("",!0)])):c("",!0),a(i).platform.is.mobile?(r(),y("div",L,[e.value?(r(),m(a(S),{key:f.value,"questionnaire-data":e.value,language:a(o),"translation-strings":{save:a(t)("questionnaire.save"),reset:a(t)("questionnaire.reset"),end:a(t)("questionnaire.end"),close:a(t)("common.close")},"disable-save":n.value,onSave:_,onReset:d},null,8,["questionnaire-data","language","translation-strings","disable-save"])):c("",!0)])):c("",!0)]),_:1}))}});var ee=V($,[["__scopeId","data-v-256260e1"]]);export{ee as default};
