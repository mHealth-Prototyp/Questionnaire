import{P as Q,u as T,r as v,S as r,U as m,V as u,a4 as a,Z as y,ag as D,f as l,X as O,Y as b,ab as h,ac as A,a9 as c,ah as R,ai as I,af as q}from"./index.4018be15.js";import{Q as N}from"./QPage.d757639b.js";import{u as k}from"./vue-i18n.runtime.esm-bundler.f1c77e2a.js";import{APP_LANGUAGES as x}from"./i18n.4d1793a1.js";import{O as w}from"./organ_donation.ae1bd3a9.js";import{d as E,u as U,C as S}from"./fhir-questionnaire-renderer.16568dee.js";import{u as V}from"./use-quasar.9afcef12.js";import{u as B}from"./composables.7026f804.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";const L={key:0,class:"col-12 col-lg-8"},j={key:1,class:"col-12"},F=Q({__name:"OrganDonationPage",setup($){const i=V(),{t,locale:o}=k(),s=T(),C=B(),n=v(!1),f=v(-1),e=v();e.value=new E.QuestionnaireData(w,x),e.value.populateAnswers([s.userResource]);function _(){var p,g;e.value&&e.value.isResponseComplete(!0,!0)&&(n.value=!0,U(e.value.getQuestionnaireResponse(o.value,{reset:!1,includeID:!0,patient:{reference:"https://test.ahdis.ch/mag-bfh/fhir/"+s.userResource.resourceType+"/"+s.userResource.id,display:s.userResource.name?q.getFullName(q.selectName(s.userResource.name)):""}}),s.userResource,{title:(p=e.value.getQuestionnaireTitle(o.value))!=null?p:R(),isFhir:!0,description:(g=e.value.getQuestionnaireTitle(o.value))!=null?g:R(),contentLanguage:o.value,sourceIdentifier:s.userSettings.OIDs.app,categoryCoding:{system:"http://snomed.info/sct",code:"184216000",display:"Patient record type"},typeCoding:{system:"http://snomed.info/sct",code:"419891008",display:"Record artifact (record artifact)"},facilityCoding:s.userSettings.facilityType,practiceSettingCoding:s.userSettings.practiceSetting,authorRole:I.PAT},C).then(()=>{i.notify({message:t("questionnaire.saved"),position:"top-right"}),d(),n.value=!1,f.value*=-1}).catch(P=>{i.notify({message:t("common.error"),type:"negative",position:"top-right"}),console.error(P),n.value=!1}))}function d(){e.value&&(e.value.resetResponse(),e.value.populateAnswers([s.userResource]))}return(p,g)=>(r(),m(N,{class:"full-width row justify-center content-start"},{default:u(()=>[a(i).platform.is.desktop?(r(),y("div",L,[e.value?(r(),m(D,{key:0,class:"q-pb-xs questionnaire-card"},{default:u(()=>[l(h,{class:"card-title"},{default:u(()=>[O(b(e.value.getQuestionnaireTitle(a(o))),1)]),_:1}),l(A),l(h,{class:"q-pa-none"},{default:u(()=>[l(a(S),{"questionnaire-data":e.value,language:a(o),"translation-strings":{save:a(t)("questionnaire.save"),reset:a(t)("questionnaire.reset"),end:a(t)("questionnaire.end"),close:a(t)("common.close")},"disable-save":n.value,onSave:_,onReset:d},null,8,["questionnaire-data","language","translation-strings","disable-save"])]),_:1})]),_:1})):c("",!0)])):c("",!0),a(i).platform.is.mobile?(r(),y("div",j,[e.value?(r(),m(a(S),{key:f.value,"questionnaire-data":e.value,language:a(o),"translation-strings":{save:a(t)("questionnaire.save"),reset:a(t)("questionnaire.reset"),end:a(t)("questionnaire.end"),close:a(t)("common.close")},"disable-save":n.value,onSave:_,onReset:d},null,8,["questionnaire-data","language","translation-strings","disable-save"])):c("",!0)])):c("",!0)]),_:1}))}});var ee=G(F,[["__scopeId","data-v-256260e1"]]);export{ee as default};
