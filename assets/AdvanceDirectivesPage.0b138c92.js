import{P as T,u as b,r as m,S as n,U as v,V as u,a4 as e,Z as _,ag as A,f as l,X as D,Y as I,ab as h,ac as P,a9 as c,ah as R,ai as k,af as q}from"./index.1575f272.js";import{Q as E}from"./QPage.220368aa.js";import{u as N}from"./vue-i18n.runtime.esm-bundler.feadb67a.js";import{APP_LANGUAGES as V}from"./i18n.d0dd61db.js";import{A as w}from"./Patientenverfuegung.38954060.js";import{d as x,u as U,C as S}from"./fhir-questionnaire-renderer.a056aaac.js";import{u as B}from"./use-quasar.bf3dff7f.js";import{u as L}from"./composables.647cdc77.js";const O={key:0,class:"col-12 col-lg-8"},j={key:1,class:"col-12"},J=T({__name:"AdvanceDirectivesPage",setup(F){const r=B(),{t,locale:o}=N(),s=b(),C=L(),i=m(!1),g=m(-1),a=m();a.value=new x.QuestionnaireData(w,V);function y(){var p,f;a.value&&a.value.isResponseComplete(!0,!0)&&U(a.value.getQuestionnaireResponse(o.value,{reset:!1,includeID:!0,patient:{reference:"https://test.ahdis.ch/mag-bfh/fhir/"+s.userResource.resourceType+"/"+s.userResource.id,display:s.userResource.name?q.getFullName(q.selectName(s.userResource.name)):""}}),s.userResource,{title:(p=a.value.getQuestionnaireTitle(o.value))!=null?p:R(),isFhir:!0,description:(f=a.value.getQuestionnaireTitle(o.value))!=null?f:R(),contentLanguage:o.value,sourceIdentifier:s.userSettings.OIDs.app,categoryCoding:{system:"http://snomed.info/sct",code:"184216000",display:"Patient record type"},typeCoding:{system:"http://snomed.info/sct",code:"419891008",display:"Record artifact (record artifact)"},facilityCoding:s.userSettings.facilityType,practiceSettingCoding:s.userSettings.practiceSetting,authorRole:k.PAT},C).then(()=>{r.notify({message:t("questionnaire.saved"),position:"top-right"}),d(),i.value=!1,g.value*=-1}).catch(Q=>{r.notify({message:t("common.error"),type:"negative",position:"top-right"}),console.error(Q),i.value=!1})}function d(){a.value&&(a.value.resetResponse(),a.value.populateAnswers([s.userResource]))}return(p,f)=>(n(),v(E,{class:"full-width row justify-center content-start"},{default:u(()=>[e(r).platform.is.desktop?(n(),_("div",O,[a.value?(n(),v(A,{key:0,class:"q-pb-xs",flat:"",bordered:""},{default:u(()=>[l(h,{class:"card-title"},{default:u(()=>[D(I(a.value.getQuestionnaireTitle(e(o))),1)]),_:1}),l(P),l(h,{class:"q-pa-none"},{default:u(()=>[l(e(S),{"questionnaire-data":a.value,language:e(o),"translation-strings":{save:e(t)("questionnaire.save"),reset:e(t)("questionnaire.reset"),end:e(t)("questionnaire.end"),close:e(t)("common.close")},"disable-save":i.value,onSave:y,onReset:d},null,8,["questionnaire-data","language","translation-strings","disable-save"])]),_:1})]),_:1})):c("",!0)])):c("",!0),e(r).platform.is.mobile?(n(),_("div",j,[a.value?(n(),v(e(S),{key:g.value,"questionnaire-data":a.value,language:e(o),"translation-strings":{save:e(t)("questionnaire.save"),reset:e(t)("questionnaire.reset"),end:e(t)("questionnaire.end"),close:e(t)("common.close")},"disable-save":i.value,onSave:y,onReset:d},null,8,["questionnaire-data","language","translation-strings","disable-save"])):c("",!0)])):c("",!0)]),_:1}))}});export{J as default};
